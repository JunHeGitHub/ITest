<!DOCTYPE html>
<html lang="en">

	<head>
		<title>页面功能授权</title>

		<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
		<meta http-equiv="description" content="this is my page">
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
   
		<!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
		<link rel="stylesheet" href="../../../css/bootstrap.min.css" type="text/css"></link>
		<link rel="stylesheet" href="../../../css/bootstrap-responsive.min.css"   type="text/css"></link>
		<link rel="stylesheet" href="../../../js/dataTables/css/DT_bootstrap.css" type="text/css"></link>
		<link rel="stylesheet"href="../../../js/dataTables/css/jquery.dataTables.css" type="text/css"></link>
		<link rel="stylesheet" href="../../../js/dataTables/css/font-awesome.css"></link>
		<script type="text/javascript" src="../../../js/jquery.js"></script>
		<script type="text/javascript" src="../../../js/bootstrap.js"></script>
		<script type="text/javascript" src="../../../js/dataTables/js/jquery.dataTables.js"></script>
		<script type="text/javascript" src="../../../js/dataTables/js/dataTables.tableTools.min.js"></script>
		<script type="text/javascript" src="../../../js/dataTables/js/DT_bootstrap.js"></script>
		<script type="text/javascript" src="../../../js/appCommonUtil.js"></script>
		<script type="text/javascript">
		      //角色列表
var roleTable=false;
var roleCode="";
var tab_type="";
       var PRJ_PATH=window.top.PRJ_PATH||"ZDesk";
	   var ZDesk_ROU=window.top.ZDesk_ROU||"ZDesk";
		  		$(function(){
		           initDataTable();
		        });
		        
			    function addTabPanel(){
			       $("#id").append('<div class="tab-content">');	    
			    }
			    
			    function initDataTable(){
     	       //获取角色数据
			      var  roleData=searchAllRole();
			      var table=$('#roleList').DataTable({
			            
			            // scrollX: "no",
			            scrollCollapse: false,
		                data:roleData,
			            dom: 'Tlrtip',
			            bPaginate: false, //翻页功能
						bLengthChange: false, //改变每页显示数据数量
						bFilter: false, //过滤功能
						bSort: false, //排序功能
						bInfo: false,//页脚信息
						bAutoWidth: true, //自动宽度
						sPaginationType: "bootstrap",
						tableTools: {
					          fnRowSelected: function (nodes) {
					                var index=nodes[0]._DT_RowIndex;	
					                var data = table.row(index).data();
					                roleCode=data.name;
					                var contsrc=$('#content').attr('src');
					                if(contsrc!=""&&contsrc!=undefined&&contsrc!=null){
					                  $('#content').attr('src',contsrc);
					                }
					                
                              },
                              sRowSelect:'os',
                              aButtons: []
                         },
                         columns: [
                          {
                             title:"角色名称",
                             data:"name",
                             orderable:true,
                             width:100
                           }
                         
                         ]
					});
					roleTable=table;
			    
			    }
		    
		 function toggleChecks(obj){
		       var table=$('#basisTable').DataTable();
		       var tableTools = new $.fn.dataTable.TableTools(table);
		       var ischeck=$("#selectall").is(':checked');
		       if(ischeck){
		         tableTools.fnSelectAll();
		       }else{
		         tableTools.fnSelectNone();
		       }
      
         }
         
function doSearch(){
//通用查询action路径
var url = "/" + PRJ_PATH + "/" + ZDesk_ROU+"/CommonsCurd" + "/" + "Find.action";
   var params={
   
   };
   params.tableName ="suSecurityRole";
   params.nameSpace ="com.zinglabs.apps.commons.pojo";
   params.nameSpaceId = "getList";
   var rdata=[];
   $.ajax({
		async :false,
		type : "post",
		url : url,
		dataType : "json",
		data : params,
		success : function(data) {
			if (data) {
              rdata=data.rows;
			}
		},
		error : function(r){
		   alert("error");			
		}
		});
     return rdata;

}  
/**
  导航切换
**/
function navigate(obj,src,type){
    var selectData=roleTable.rows(".active").data();
    if(selectData.length<=0){

       //$.alert("提示","请选择角色");
       zinglabs.i18n.alert("permission_role");
       return ;
    }
    var  tabMenu=$(obj).parent();
    $(tabMenu).siblings().each(function(){
       $(this).removeClass("active");
    });
    $(tabMenu).addClass("active");
    $('#content').attr('src',src);
    tab_type=type;
    
}

function  getRoleCodeAndType(){ 
    return {
      "roleCode":roleCode,
      "type":tab_type
    }
}


/*table
        .row( this )
        .data( d )
        .draw();*/
		</script>

	</head>

	<body>
	  <!-- 面板 -->
		
               
<div class="container-fluid">
 <div class="row-fluid">
    <div class="span2">
	     <table id="roleList" width="150px" class="table table-striped table-bordered" style="margin-top:20px" cellspacing="0">
		  </table>
    </div>
    <div class="span10">
         <div  class="row-fluid">
                <div class="navbar">
		           <ul class="nav">
						  <li>
					        <a href="javascript:void(0)" onclick="navigate(this,'menuPermission.html','menu')">菜单功能授权</a>
						  </li>
						  <li>
						    <a href="javascript:void(0)" onclick="navigate(this,'basePermission.html','base')" >基础权限</a>
						  </li>
						  <li>
						     <a href="javascript:void(0)" onclick="navigate(this,'zkmPermission.html','ZKM')" >知识库权限</a>
						  </li>
						  <li>
						     <a href="javascript:void(0)" onclick="navigate(this,'pagePermission.html','page')">页面功能授权</a>
						   </li>
					       <li>
					         <a href="javascript:void(0)" onclick="navigate(this,'tabPermission.html','tab')">选项卡</a>
					       </li>
					</ul>
		         </div>
                   
	    </div>
	    <div class ="row-fluid" style="margin-top:40px">
		    <iframe id="content" src="" frameborder="0" style="width:100%;height:800px"  scrolling=auto></iframe>
		</div>
    </div>
 </div>
</div>

        

	</body>
</html>
