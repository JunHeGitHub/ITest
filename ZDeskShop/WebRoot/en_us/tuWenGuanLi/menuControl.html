
<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link href="./css/menuControl.css" rel="stylesheet" type="text/css" />
<title>menu</title>
<script src="./js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="../../js/common_utils.js" type="text/javascript"></script>
<script type="text/javascript" src="../../js/appCommonUtil.js"></script>

<script type="text/javascript">
	$(document).ready(function() {
		handleMenuData("top_bottom",getMenu("新闻"),getMenu("娱乐"));
	});
/*
获取菜单
json数据格式
*/
function getMenu(t){
			var type = t;
			var jsons={};	
			var rData=[];
			var resultData={"length":0};
			var count=0;
			var url="/"+PRJ_PATH+"/ZKM/ZKMCommonTree/getCaidanTreeNode_geshu.action";
			jsons.type=type;
				ajaxFunction(url,jsons,false,function (data){
					if(data.success){
						count=data.data.length;
						for(var i=0;i<data.data.length;i++){
							var q={};
							q.name=data.data[i]["name"];
							q.address=data.data[i]["u"];
							q.id=data.data[i]["id"];
							q.data=[];
							resultData[i]=q;
						}
						resultData.length=data.data.length;
					}
				});
			url="/"+PRJ_PATH+"/ZKM/ZKMCommonTree/getCaidanTreeNode_isStart1.action";
			jsons.type=type;
				ajaxFunction(url,jsons,false,function (data){
					if(data.success){
						for(var k=0;k<data.data.length;k++){
						  	for(var p=0;p<count;p++){
						        if(data.data[k]["pId"]==resultData[p]["id"]){
						             var s={};
						             s.name=data.data[k]["name"];
						             s.address=data.data[k]["u"];
						             resultData[p]["data"].push(s);
						        }
							}
						}
					}
				});	
			return resultData;	
}

//处理menu数据
function handleMenuData(type,topMenuData,bottomMenuData){
	var menuStr="";
	if(type!=undefined && type!="" && (type=="top" || type=="top_bottom")){
		if(topMenuData && topMenuData!=null && topMenuData!=undefined && topMenuData.length!=0){
			menuStr="<div id='topMenu3x5' ><ul>";
					
			if(topMenuData.length>3){
				menuStr="<div id='topMenu4x5' ><ul>";
			}
			for(var o = 0;o< topMenuData.length;o++){
				if(topMenuData[o].data && topMenuData[o].data!=null && topMenuData[o].data!=undefined && topMenuData[o].data.length==0){
					menuStr+="<li><a href='"+topMenuData[o].address+"' ><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;"+topMenuData[o].name+"</div></a>";
				}else{
					menuStr+="<li><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;"+topMenuData[o].name+"</div>";
				}
				if(o<topMenuData.length-1){
					menuStr+="<img class='line' src='images/line.png' width=1>";
				}
				if(topMenuData[o].data && topMenuData[o].data!=null && topMenuData[o].data!=undefined && topMenuData[o].data.length!=0){
					menuStr+="<span><img src='images/navbg"+topMenuData[o].data.length+"_top.png' width='100%'><div class='zicaidian'>";
					for(var s in topMenuData[o].data){
						menuStr+="<a href='"+topMenuData[o].data[s].address+"'>"+topMenuData[o].data[s].name+"</a>";	
					}
					menuStr+="</div></span>";
				}else{
					menuStr+="<span>&nbsp;</span>";
				}
				menuStr+="</li>";
			}
			menuStr+="</u></div>";
	
		}
	}
	if(type!=undefined && type!="" && (type=="bottom" || type=="top_bottom")){
		if(bottomMenuData && bottomMenuData!=null && bottomMenuData!=undefined && bottomMenuData.length!=0){
			
			if(bottomMenuData.length>3){
				menuStr+="<div id='bottomMenu4x5' ><ul>";
			}else{
				menuStr+="<div id='bottomMenu3x5' ><ul>";
			}
			for(var o = 0;o< bottomMenuData.length;o++){
				if(bottomMenuData[o].data && bottomMenuData[o].data!=null && bottomMenuData[o].data!=undefined && bottomMenuData[o].data.length==0){
					menuStr+="<li><a href='"+bottomMenuData[o].address+"' ><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;"+bottomMenuData[o].name+"</div></a>";
				}else{
					menuStr+="<li><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;"+bottomMenuData[o].name+"</div>";
				}
				if(o<bottomMenuData.length-1){
					menuStr+="<img class='line' src='images/line.png' width=1>";
				}			
				if(bottomMenuData[o].data && bottomMenuData[o].data!=null && bottomMenuData[o].data!=undefined && bottomMenuData[o].data.length!=0){
					menuStr+="<span><img src='images/navbg"+bottomMenuData[o].data.length+"_bottom.png' width='100%'><div class='zicaidian'>";
					for(var s in bottomMenuData[o].data){
						menuStr+="<a href='"+bottomMenuData[o].data[s].address+"'>"+bottomMenuData[o].data[s].name+"</a>";	
					}
					menuStr+="</div></span>";
				}else{
					menuStr+="<span>&nbsp;</span>";
				}
				menuStr+="</li>";
			}
			menuStr+="</u></div>";
			
	
		}
	}
	if(menuStr!=""){
		var cssTemp="";
		if(type!=undefined && type!="" && type=="top"){
			cssTemp="editAreaTop";
		}
		if(type!=undefined && type!="" && type=="bottom"){
			cssTemp="editAreaBottom";
		}
		if(type!=undefined && type!="" && type=="top_bottom"){
			cssTemp="editAreaTopAndBottom";
		}
		$("#editArea").removeClass("editArea");
		$("#editArea").addClass(cssTemp);
		var temp="<div id='zheceng' class='footer_front'><img src='images/front.png' width='100%' height='100%'></div>";
		$(temp).appendTo($("body"));	
		$("#zheceng").before(menuStr);
		$("<scri"+"pt>"+"</scr"+"ipt>").attr({src:'./js/menuControl.js',type:'text/javascript'}).appendTo($("body"));
	}
}
</script>
</head>

<body>
<div id="editArea" class="editArea">
编辑区域...
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>底部...

</div>
<!-- 
<div id='topMenu4x5' >
	<ul>
		
		<li><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;菜单一</div><img class='line' src='images/line.png' width=1>
		
			<span><img src='images/navbg4_top.png' width='100%'><div class='zicaidian'>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				</div></span></li>
		
		<li><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;菜单二</div><img class='line' src='images/line.png' width=1>
		
			<span>
				<img src='images/navbg4_top.png' width='100%'>
				<div class='zicaidian'>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				</div>
			</span>
		
		</li>
		
		<li><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;菜单二</div><img class='line' src='images/line.png' width=1>
		
			<span>
				<img src='images/navbg4_top.png' width='100%'>
				<div class='zicaidian'>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				</div>
			</span>
		
		</li>
		
		<li><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;菜单三</div>
		
			<span>
				<img src='images/navbg5_top.png' width='100%'>
				<div class='zicaidian'>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				</div>
			</span>
		
		</li>		
	</ul>
</div>
<div id='bottomMenu3x5' >
	<ul>
		
		<li><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;菜单一</div><img class='line' src='images/line.png' width=1>
		
			<span>
				<img src='images/navbg4.png' width='100%'>
				<div class='zicaidian'>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				</div>
			</span>
		
		</li>
		
		<li><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;菜单二</div><img class='line' src='images/line.png' width=1>
		
			<span>
				<img src='images/navbg4.png' width='100%'>
				<div class='zicaidian'>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				</div>
			</span>
		
		</li>
		
		<li><img class='img_front' src='images/front.png'><div class='menu_li'><img src='images/coin.png' width=10>&nbsp;菜单三</div>
		
			<span>
				<img src='images/navbg5.png' width='100%'>
				<div class='zicaidian'>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				<a href='http://www.baidu.com'>子菜单</a>
			
				</div>
			</span>
		
		</li>		
	</ul>
</div>
 -->

</body>
</html>
