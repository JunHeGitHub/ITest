<!DOCTYPE  HTML>
<html lang="en">
	<head>
		<title>教材文件查询</title>

		<meta http-equiv="keywords" content="keyword1,keyword2,keyword3" />
		<meta http-equiv="description" content="this is my page" />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="../../css/bootstrap.css" type="text/css"></link>
		<link rel="stylesheet"
			href="../../js/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css"
			type="text/css"></link>

		<link rel="stylesheet"
			href="../../js/dataTables/css/jquery.dataTables.css" type="text/css"></link>

		<!-- 工具 -->
		<link rel="stylesheet"
			href="../../js/dataTables/css/dataTables.tableTools.min.css"
			type="text/css"></link>
		<!-- bootstrap 与 datatable结合 -->
		<link rel="stylesheet" href="../../js/dataTables/css/DT_bootstrap.css"
			type="text/css"></link>
		<link rel="stylesheet" href="../../js/dataTables/css/font-awesome.css"></link>
		<link rel="stylesheet"
			href="../../js/dataTables/css/Z_DataTalbeCheckBox.css"></link>
		<link rel="stylesheet"
			href="../../js/dataTables/css/dataTables.colVis.min.css"
			type="text/css"></link>
		<script type="text/javascript" src="../../js/jquery.js"></script>
		<script type="text/javascript" src="../../js/bootstrap.js"></script>
		
		<script type="text/javascript"
			src="../../js/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
		<script type="text/javascript"
			src="../../js/bootstrap-datetimepicker/bootstrap-datetimepicker.zh-CN.js"></script>

		<script type="text/javascript" src="../../js/common_utils.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/jquery.dataTables.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/dataTables.colReorder.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/dataTables.colVis.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/dataTables.tableTools.min.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/DT_bootstrap.js"></script>
		<script type="text/javascript" src="../../js/golbal_params.js"></script>
		<script type="text/javascript" src="../../js/appCommonUtil.js"></script>
		<script type="text/javascript" src="../../js/appCommonCurdUtils.js"></script>
		<script type="text/javascript" src="../../js/html5.js"></script>
		<script type="text/javascript" src="./ZQC_common.js"></script>
		<script type="text/javascript" src="jiaocaiwenjianchaxun.js"></script>
		<script type="text/javascript">
var data_;
		$(document).ready(function() {
		
        //加载物理组---动态写入select   
            doSearch_jiaocaimuluming();
            doSearch_wulizu();
            doSearch_zuoxigonghao();
            //doSearch_zuoxigonghao();
			var data;
			$('#zuoxipeixun').dataTable({
				data:data,//数据赋值
			    dom: 'TRlfrtip',				
				bProcessing : true, //是否启用正在加载中...
		        bPaginate: true, //翻页功能
				bLengthChange: false, //改变每页显示数据数量
				bFilter: false, //过滤功能
				bSort: true, //排序功能		       
				bInfo: true,//页脚信息
				bAutoWidth: false, //自动宽度
				sPaginationType: "bootstrap",//分页样式
			    scrollCollapse: true,
				sScrollX:"100%",
		        "aaSorting":[[1,'asc']],
				"bScrollCollapse": true,
				columns: [
					{ title:"<center><input type='checkbox' id='selectall' onclick='toggleChecks(this);' ></input></center>",data: null, defaultContent: '', orderable: false,width:10 },
					/**title 表头  data json 对应key **/
			        {"title":"评分流水号" ,data: 'grade_id',width:'150px'},
			        {"title":"培训导入人",data:'import_user',width:'150px'},
			        {"title":"分机号码",data:'phone_number',width:'150px'},
			        {"title":"教材导入时间",data: 'teach_set_time',width:'150px' },
			         {"title":"教材目录名",data:'teach_name',width:150},
			        {"title":"教材评语",data:'remark',width:150},
			        {"title":"录音/文本文件名称",data: 'file_name',width:150},
			         {"title":"录音文件位置",data:'file_location',width:150},
					{ title:"标识" ,data: 'id',visible: false,searchable: false}
		        ],
		        oLanguage: {
					"sLengthMenu": "每页显示 _MENU_条",
					"sZeroRecords": "没有找到符合条件的数据",
					"sProcessing": "数据正在加载，请稍后...",
					"sInfo": "当前第 _START_ - _END_ 条　共计 _TOTAL_ 条",
					"sInfoEmpty": "没有记录",
					"sInfoFiltered": "(从 _MAX_ 条记录中过滤)",
					"sSearch": "搜索：",
					"oPaginate": {
					"sFirst": "首页",
					"sPrevious": "前一页",
					"sNext": "后一页",
					"sLast": "尾页"
				    }
		        }, 
		        tableTools: {
		            //single 单选 multi 多选  os 可以按ctrl 选择		            
		            //回调 单选
		            fnRowSelected: function ( nodes ) {
		               var index=nodes[0]._DT_RowIndex;	
		               data_ = table.row(index).data();
		                $("#addFormDiv").slideUp(300);
						$("#updateFormDiv").slideDown(300);
						$("#addPeixunDiv").slideUp(300);
							//alert(JSON.stringify(data));
		              initForm1(data_);
		              $("#teach_name").val('');
		              
		            },
		            sRowSelect:'multi',
		            "aButtons": []
		        }
		    });		    
			//绑定事件 on
		    var table= $('#zuoxipeixun').DataTable();		    
		    $('#zuoxipeixun tbody').dblclick('click',function(e){
		    	scroll2data("updateForm");		    	
			});		    			 
		    //自定义列插件绑定
		    var colvis = new $.fn.dataTable.ColVis(table,{ buttonText: '自定义显示列',exclude: [ 0 ,1] });
		    $(colvis.button()).insertBefore('#cols'); 		    		    		    
		});		
			function filterColumn(i){
			    $('#zuoxipeixun').DataTable().column(i).search($('#col'+i+'_filter').val()).draw();
			}
			function showSearchItems(){
				$("#searchItems").slideToggle(200);
			}
		
			</script>
	</head>
	<body style="overflow: auto;">
		<!-- 头部导航条 -->
		<!-- 数据表格展示模块 开始 -->
		<div class="row-fluid" style="margin-top: -18px;">
			<div class="widget-box">
				<div class="widget-box">
					<div class="widget-title"
						style="height: 40px; line-height: 40px; overflow: hidden;">
						<span class="icon" style="float: left; padding: 0px 10px;">
							<i class="icon-search"></i> </span>
						&nbsp;&nbsp;&nbsp;每页显示条数：
						<select name="pageSize" id="pageSize"
							style="width: 80px; margin-bottom: 0px;"
							onchange="setPageNum('tableForData','pageSize')">
							<option selected="selected" value="10">
								10
							</option>
							<option value="30">
								30
							</option>
							<option value="50">
								50
							</option>
							<option value="100">
								100
							</option>
						</select>
						<div class="buttons" style="margin-top: 0px;" id="cols">
							<button type="button" class="btn"
								onclick="showSearchItems('searchItems');">
								展开/关闭筛选项
							</button>
						</div>
					</div>
				</div>
				<!-- 搜索项模块 开始 -->
				<div id="searchItems" class="widget-content row"
					style="margin: 0 auto; width: 100%; border-left: 1px solid #ccc; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; margin-top: -18px; margin-bottom: 18px; display: none; overflow: auto">
					<table id="columns" style="margin-left: 60px;">
						<tr>
							<td style="text-align: right; width: 100px">
								教材导入时间:
							</td>
							<td>
								<div class="input-append date"
									data-link-field="teach_set_time_start"
									data-picker-position="bottom-left"
									data-provide="datetimepicker-inline"
									data-date-format="yyyy-MM-dd hh:mm:ss">
									<input type="text" id="teach_set_time_start"
										style="width: 178px" name="teach_set_time">
									<span class="add-on"><i class="icon-th"></i> </span>
								</div>
								<span style="color: red;">*</span>
							</td>
							<td style="text-align: right; width: 90px">
								到:
							</td>
							<td>
								<div class="input-append date"
									data-link-field="teach_set_time_end"
									data-picker-position="bottom-left"
									data-provide="datetimepicker-inline"
									data-date-format="yyyy-MM-dd hh:mm:ss">
									<input type="text" id="teach_set_time_end"
										name="teach_set_time_end" style="width: 178px" />
									<span class="add-on"><i class="icon-th"></i> </span>
								</div>
								<span style="color: red;">*</span>
							</td>
							<td style="text-align: right; width: 90px">
								分机号码:
							</td>
							<td>
								<input type="text" id="phone_number" name="phone_number"
									width="200px" />
							</td>
						</tr>
						<tr>
							<td style="text-align: right; width: 90px">
								教材导入人:
							</td>
							<td>
								<input type="text" id="import_user" name="import_user"
									width="200px" />
							</td>
							<td style="text-align: right; width: 90px">
								教材目录名:
							</td>
							<td>
								<select id="teach_name" name="teach_name" class="teach_name">
								</select>
							</td>
						

					</table>
					<div style="margin-left: 470px">
						<button type="button" id="btn_add" class="btn"
							onclick="doSearch1();" id="btn_sousuo">
							<i class="icon-tag"></i> 搜索
						</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" id="btn_zhikong" class="btn" 
						onclick="dochongzhi();">
						<i class="icon-tag"></i> 重置
					</button>
					</div>

				</div>
				<!-- 搜索项模块 结束 -->
				<!-- 数据表格展示模块 开始 -->
				<div style="margin-top: -15px; position: relative;">
					<!-- class 或 = display -->
					<table style="width: 100%;"
						class="table table-striped table-bordered nowrap" id="zuoxipeixun"
						cellspacing="0"></table>
				</div>
			</div>
		</div>
		<!-- 数据表格展示模块 结束 -->


		<!-- 此地放可以放置table等 -->


		<!-- 功能按钮模块 开始 -->
		<div class="widget-box collapsible" style="margin-top: -15px;">
			<div class="widget-title"
				style="height: 40px; line-height: 40px; overflow: hidden;">
				<span class="icon" style="float: left; padding: 0px 10px;"><i
					class="icon-cog"></i> </span> &nbsp;&nbsp;&nbsp;
				<button href="#1" type="button" id="btn_add" class="btn"
					onclick="add();" id="btn_tianjia">
					<i class="icon-tag"></i> 添加
				</button>
				<button href="#1" type="button" id="btn_add" class="btn"
					onclick="doDelete();" id="btn_shanchu">
					<i class="icon-trash"></i> 删除
				</button>
				<button href="#1" type="button" id="btn_add" class="btn"
					onclick="addPeixun();" id="btn_tianjiapeixun">
					<i class="icon-trash"></i> 添加培训
				</button>
				<button href="#1" type="button" id="btn_add" class="btn"
					onclick="d();" id="btn_tianjiapeixun">
					<i class="icon-search"></i>查看评分/内容
				</button>
			</div>
		</div>
		<!-- 功能按钮模块 结束 -->
		<!-- 此处可以放table -->
		<!-- 修改数据form 开始 -->
		<div id="updateFormDiv" class="widget-content row hide"
			style="margin: 0 auto; text-align: center; width: 100%; border-left: 1px solid #ccc; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; margin-top: -18px; margin-bottom: 18px;">
			<form class="form-horizontal" id="updateForm">
				<input type="hidden" id="id" name="id" placeholder="id">
				<table style="margin: auto; width: 100%;">
					<tr>
						<td style="width: 100px; text-align: right;">
							评分流水号:
						</td>
						<td style="text-align: left;">
							<div id="text-Div-u">
								<input type="text" id="grade_idu" name="grade_id" width="200px"
									 />
							<span style="color: red;">*</span>
							</div>
						</td>

						<td style="width: 100px; text-align: right;">
							培训导入人:
						</td>
						<td style="text-align: left;">
							<input type="text" id="import_useru" name="import_user"
								width="200px" />
						</td>
						<td style="width: 100px; text-align: right;">
							分机号码:
						</td>
						<td style="text-align: left;">
							<input type="text" id="phone_numberu" name="phone_number"
								width="200px" />
						</td>

					</tr>
					<tr>
						<td style="width: 100px; text-align: right;">
							教材导入时间:
						</td>
						<td style="text-align: left;">
							<div class="input-append date" data-link-field="teach_set_timeu"
								data-picker-position="bottom-left"
								data-provide="datetimepicker-inline"
								data-date-format="yyyy-MM-dd hh:mm:ss" id="time1">
								<input type="text" id="teach_set_timeu" style="width: 178px"
									name="teach_set_time" >
								<span class="add-on"><i class="icon-th"></i> </span>
							</div>
							<span style="color: red;">*</span>
						</td>
						<td style="width: 100px; text-align: right;">
							教材评语:
						</td>
						<td style="text-align: left;">
							<input type="text" id="remarku" name="remark" />
						</td>
						<td style="width: 100px; text-align: right;">
							录音/文本文件名称:
						</td>
						<td style="text-align: left;">
							<input type="text" id="file_nameu" name="file_name" />
						</td>
					</tr>
					<tr>
						<td style="width: 100px; text-align: right;">
							录音/文本文件位置:
						</td>
						<td style="text-align: left;">
							<input type="text" id="file_locationu" name="file_location" />
						</td>

						<td style="width: 100px; text-align: right;">
							教材目录名:
						</td>
						<td style="text-align: left;">
							<select id="teach_nameu" name="teach_name" class="teach_name">
							</select>
						</td>
					</tr>
				</table>
			</form>
			<button type="button" id="btn_add" class="btn" onclick="doUpdate();"
				id="btn_xiugaitijiao">
				<i class="icon-tag"></i> 修改提交
			</button>
		</div>
		<!-- 修改数据form 结束 -->
		<!-- 添加数据form 开始 -->
		<div id="addFormDiv" class="widget-content row hide"
			style="margin: 0 auto; text-align: center; width: 100%; border-left: 1px solid #ccc; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; margin-top: -18px; margin-bottom: 18px;">
			<form id="addForm">
				<table style="margin: auto; width: 100%;">
					<tr>
						<td style="width: 100px; text-align: right;">
							评分流水号:
						</td>
						<td style="text-align: left;">
							<div id="text-Div-a">
								<input type="text" id="grade_ida" name="grade_id" width="200px"
									 />
									 <span style="color: red;">*</span>
							</div>
							
						</td>

						<td style="width: 100px; text-align: right;">
							培训导入人:
						</td>
						<td style="text-align: left;">
							<input type="text" id="import_usera" name="import_user"
							readonly="readonly"	width="200px" />
						</td>
						<td style="width: 100px; text-align: right;">
							分机号码:
						</td>
						<td style="text-align: left;">
							<input type="text" id="phone_numbera" name="phone_number"
								width="200px" />
						</td>

					</tr>
					<tr>
						<td style="width: 100px; text-align: right;">
							教材导入时间:
						</td>
						<td style="text-align: left;">
							<div class="input-append date" data-link-field="teach_set_timea"
								data-picker-position="bottom-left"
								data-provide="datetimepicker-inline"
								data-date-format="yyyy-MM-dd hh:mm:ss" id="time3">
								<input type="text" id="teach_set_timea" style="width: 178px"
									name="teach_set_time" >
								<span class="add-on"><i class="icon-th"></i> </span>
							</div>
							<span style="color: red;">*</span>
						</td>
						<td style="width: 100px; text-align: right;">
							教材评语:
						</td>
						<td style="text-align: left;">
							<input type="text" id="remarka" name="remark" />
						</td>
						<td style="width: 100px; text-align: right;">
							录音/文本文件名称:
						</td>
						<td style="text-align: left;">
							<input type="text" id="file_namea" name="file_name" />
						</td>
					</tr>
					<tr>
						<td style="width: 100px; text-align: right;">
							录音/文本文件位置:
						</td>
						<td style="text-align: left;">
							<input type="text" id="file_locationa" name="file_location" />
						</td>

						<td style="width: 100px; text-align: right;">
							教材目录名:
						</td>
						<td style="text-align: left;">
							<select id="teach_namea" name="teach_name" class="teach_name">
							</select>
						</td>
					</tr>
				</table>
			</form>
			<button type="button" id="btn_add" class="btn" onclick="doInsert();"
				id="btn_tianjiatijiao">
				<i class="icon-tag"></i> 添加提交
			</button>
		</div>

		<!-- 添加数据form 结束 -->
		<div id="addPeixunDiv" class="widget-content row hide"
			style="margin: 0 auto; text-align: center; width: 100%; border-left: 1px solid #ccc; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; margin-top: -18px; margin-bottom: 18px;">
			<form id="addPeixun">
				<table style="margin: auto; width: 100%;">
					<tr>
						<td style="width: 100px; text-align: right;">
							评分流水号:
						</td>
						<td style="text-align: left;">
							<div id="text-Div">
								<input type="text" id="grade_ida_p" name="grade_id" readonly="readonly"
									width="200px"  />
							</div>
						</td>

						<td style="width: 100px; text-align: right;">
							培训导入人:
						</td>
						<td style="text-align: left;">
							<input type="text" id="import_usera_p" name="import_user" readonly="readonly"
								width="200px" />
						</td>
						<td style="width: 100px; text-align: right;">
							分机号码:
						</td>
						<td style="text-align: left;">
							<input type="text" id="phone_numbera_p" name="phone_number" readonly="readonly"
								width="200px" />
						</td>

					</tr>
					<tr>
						<td style="width: 100px; text-align: right;">
							培训导入时间:
						</td>
						<td style="text-align: left;">
							<div class="input-append date"
								data-link-field="teach_set_timea_p"
								data-picker-position="bottom-left"
								data-provide="datetimepicker-inline"
								data-date-format="yyyy-MM-dd hh:mm:ss" id="time6">
								<input type="text" id="teach_set_timea_p" style="width: 178px"
									name="teach_set_time" >
								<span class="add-on"><i class="icon-th"></i> </span>
							</div>

						</td>
						<td style="width: 100px; text-align: right;">
							培训完成时间:
						</td>
						<td style="text-align: left;">
							<div class="input-append date" data-link-field="generate_timea_p"
								data-picker-position="bottom-left"
								data-provide="datetimepicker-inline"
								data-date-format="yyyy-MM-dd hh:mm:ss" id="time5">
								<input type="text" style="width: 178px" id="generate_timea_p"
									name="generate_time" >
								<span class="add-on"><i class="icon-th"></i> </span>
							</div>

						</td>
						<td style="width: 100px; text-align: right;">
							文本/文本文件名称:
						</td>
						<td style="text-align: left;">
							<input type="text" id="file_namea_p" name="file_name" />
						</td>
					</tr>
					<tr>
						<td style="width: 100px; text-align: right;">
							文本/文本文件位置:
						</td>
						<td style="text-align: left;">
							<input type="text" id="file_locationa_p" name="file_location" />
						</td>
						<td style="width: 100px; text-align: right;">
							培训内容:
						</td>
						<td colspan="3"  style="text-align: left;">
						<textarea id="remarka_p" name="remark"
							style="padding: 0; margin: 0; width: 85%; height: 40px"></textarea>
						</td>
						
						
					</tr>
					<tr>
						<td style="width: 100px; text-align: right;" >
							物理组:
						</td>
						<td  style="text-align: left;" colspan="5">
							<div class="input-append">
								<input class="span2" id="wulizuList" type="text"
									style="margin-top: 10px; width: 411px;" readonly>
								<button type="button" id="btn_xuanzewulizu"
									onclick="choseWulizu();" style="margin-top: 10px;width: 112px"
									class="btn">
									选择物理组
								</button>
							</div>
						</td>
					</tr>
					<tr>
						<td style="width: 100px; text-align: right;" >
							座席工号:
						</td>
						<td  style="text-align: left;" colspan="5">
							<div class="input-append">
								<input class="span2" id="zuoxigonghaoList" type="text"
									style="margin-top: 10px; width: 412px;" readonly>
								<button type="button" id="btn_xuanzewulizu"
									onclick="chosezuoxigonghao();" style="margin-top: 10px;"
									class="btn">
									选择坐席工号
								</button>
							</div>
						</td>
					</tr>
				</table>
			</form>
			<button type="button" id="btn_add" class="btn"
				onclick="doAddPeiXun();" id="btn_tianjiapeixuntijiao">
				<i class="icon-tag"></i> 添加培训提交
			</button>
		</div>
	</body>
</html>