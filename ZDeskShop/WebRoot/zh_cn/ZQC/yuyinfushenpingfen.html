<!DOCTYPE  HTML>
<html lang="en">
	<head>
		<title></title>

		<meta http-equiv="keywords" content="keyword1,keyword2,keyword3" />
		<meta http-equiv="description" content="this is my page" />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="../../css/bootstrap.css" type="text/css"></link>
		<link rel="stylesheet"
			href="../../js/dataTables/css/jquery.dataTables.css" type="text/css"></link>
		<link rel="stylesheet"
			href="../../js/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css"
			type="text/css"></link>
		<!-- 工具 -->
		<link rel="stylesheet"
			href="../../js/dataTables/css/dataTables.tableTools.min.css"
			type="text/css"></link>
		<!-- bootstrap 与 datatable结合 -->
		<link rel="stylesheet" href="../../js/dataTables/css/DT_bootstrap.css"
			type="text/css"></link>
		<link rel="stylesheet" href="../../js/dataTables/css/font-awesome.css"></link>
		<link rel="stylesheet"
			href="../../js/dataTables/css/Z_DataTalbeCheckBox.css"></link>
		<link rel="stylesheet"
			href="../../js/dataTables/css/dataTables.colVis.min.css"
			type="text/css"></link>
		<script type="text/javascript" src="../../js/jquery.js"></script>
		<script type="text/javascript" src="../../js/bootstrap.js"></script>
		<script type="text/javascript" src="../../js/common_utils.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/jquery.dataTables.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/dataTables.colReorder.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/dataTables.colVis.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/dataTables.tableTools.min.js"></script>
		<script type="text/javascript"
			src="../../js/dataTables/js/DT_bootstrap.js"></script>
		<script type="text/javascript"
			src="../../js/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
		<script type="text/javascript" src="../../js/golbal_params.js"></script>
		<script type="text/javascript" src="../../js/appCommonUtil.js"></script>
		<script type="text/javascript" src="../../js/appCommonCurdUtils.js"></script>
		<script type="text/javascript" src="./ZQC_common.js"></script>
		<script type="text/javascript" src="../../js/appCommonCurdUtils_new.js"></script>
		<script type="text/javascript" src="./yuyinfushenpingfen.js"></script>
<style type="text/css">
   .datetimepicker{
		margin-top:-25px !important;
   }
</style>
		<script type="text/javascript">
		
		$(document).ready(function() {
			
			//加载数据状态
			initShuJuZhuangTai("fushen","data_state");
			//加载评分状态
			initPingFenZhuangTai("fushen","score_state");
			//加载业务类型
			initYeWuLeiXing("business_type");
			//var data=initData();
			$('#tableForData').dataTable({
			    dom: 'TRlfrtip',
				bProcessing : true, //是否启用正在加载中...
		        bPaginate: true, //翻页功能
				bLengthChange: false, //改变每页显示数据数量
				bFilter: false, //过滤功能
				bSort: true, //排序功能
				bInfo: true,//页脚信息
				bAutoWidth: false, //自动宽度
				sPaginationType: "bootstrap",//分页样式
			    scrollCollapse: true,
				scrollX:"100%",
				"bScrollCollapse": true,
				columns: [
					{ title:"<center><input type='checkbox' id='selectall' onclick=toggleChecks('tableForData','selectall') ></input></center>",data: null, defaultContent: '', orderable: false,width:10 }
					,{
			          "title":"操作",
			          data:"grade_id",
					  "sClass": "center",
					  "bSearchable": false,
					  "bStorable": false
					 }
					,{"title":"评分流水号" ,data: 'grade_id',width:200}  
                    ,{"title":"工号" ,data: 'owner',width:200}  
                    ,{"title":"分机号码" ,data: 'agent_user',width:200}  
                    ,{"title":"座席复审说明" ,data: 'agent_user_remark',width:200}  
                    ,{"title":"座席上诉时间" ,data: 'agent_user_dt',width:200}  
                    ,{"title":"评分评语",data:'grade_remark',width:150}
                    ,{"title":"复检内容/评分评语" ,data: 'grade_remark_fj',width:200}  
                    ,{"title":"质检复审说明" ,data: 'admin_remark',width:200}  
                    ,{"title":"复审评分状态" ,data: 'score_state',width:200}  
                    ,{"title":"文件名" ,data: 'file_name',width:200}  
                    
		        ],
		        oLanguage: {
					"sLengthMenu": "每页显示 _MENU_条",
					"sZeroRecords": "没有找到符合条件的数据",
					"sProcessing": "数据正在加载，请稍后...",
					"sInfo": "当前第 _START_ - _END_ 条　共计 _TOTAL_ 条",
					"sInfoEmpty": "没有记录",
					"sInfoFiltered": "(从 _MAX_ 条记录中过滤)",
					"sSearch": "搜索：",
					"oPaginate": {
					"sFirst": "首页",
					"sPrevious": "前一页",
					"sNext": "后一页",
					"sLast": "尾页"
				    }
		        }, 
		        tableTools: {
		            //single 单选 multi 多选  os 可以按ctrl 选择		            
		            //回调 单选
		            fnRowSelected: function ( nodes ) {
		               var index=nodes[0]._DT_RowIndex;	
		               var data = table.row(index).data();
		               $("#piliangfenpeiFormDiv").slideUp(500);
						//$("#updateFormDiv").slideDown(500);	
						 
		                initForm("updateForm",data);
		                //根据文件名获取SU_QC_SOURCE_RECORD_DATA表数据的id
		                
		            },
		            sRowSelect:'multi',
		            "aButtons": []
		        },
		        "fnCreatedRow" : function(nRow,aData,iDataIndex){
					var dataInfo=JSON.stringify(aData);
				 	$('td:eq(1)',nRow).html("<button type='button' class='btn btn-mini' onclick='pf("+dataInfo+")' style='margin-left:5px;'>评分</button>"); 
				}
		    });
		    
		    $('#tableForUserData').dataTable({
			    dom: 'TRlfrtip',
				bProcessing : true, //是否启用正在加载中...
		        bPaginate: true, //翻页功能
				bLengthChange: true, //改变每页显示数据数量
				bFilter: true, //过滤功能
				bSort: true, //排序功能
				bInfo: true,//页脚信息
				bAutoWidth: false, //自动宽度
				sPaginationType: "bootstrap",//分页样式
			    scrollCollapse: true,
				scrollX:"100%",
				"bScrollCollapse": true,
				columns: [
					{ title:"<center><input type='checkbox' id='selectall2' onclick=toggleChecks('tableForUserData','selectall2'); ></input></center>",data: null, defaultContent: '', orderable: false,width:10 },
					/**title 表头  data json 对应key **/
					{"title": "工号",data: 'job_number',visible: false},
			        {"title":"登录名称" ,data: 'loginName',className: "my_class"},
			        {"title":"用户姓名",data:'name'},
			        {"title": "用户当前状态",data: 'startus',visible: false},
			        {"title": "分机号",data: 'phone_number'},
			        {"title": "坐席号",data: 'seat_number'},
			        {"title": "等级",data: 'agent_level'}
                          					
		        ],
		        oLanguage: {
					"sLengthMenu": "每页显示 _MENU_条",
					"sZeroRecords": "没有找到符合条件的数据",
					"sProcessing": "数据正在加载，请稍后...",
					"sInfo": "当前第 _START_ - _END_ 条　共计 _TOTAL_ 条",
					"sInfoEmpty": "没有记录",
					"sInfoFiltered": "(从 _MAX_ 条记录中过滤)",
					"sSearch": "搜索：",
					"oPaginate": {
					"sFirst": "首页",
					"sPrevious": "前一页",
					"sNext": "后一页",
					"sLast": "尾页"
				    }
		        }, 
		        tableTools: {
		            //single 单选 multi 多选  os 可以按ctrl 选择		            
		            //回调 单选
		            fnRowSelected: function ( nodes ) {
		            },
		            sRowSelect:'multi',
		            "aButtons": []
		        }
		    });
		    
			//绑定事件 on
		    var table= $('#tableForData').DataTable();
		    
		    //双击滚动到显示数据块
		    $('#tableForData tbody').dblclick('click',function(e){
		    	//scroll2data("updateFormDiv");		    	
			});		    			 
		    //自定义列插件绑定
		    var colvis = new $.fn.dataTable.ColVis(table,{ buttonText: '自定义显示列',exclude: [ 0 ,1] });
		     var cButton=$(colvis.button());
		    //控制查询按钮显示 	
		    cButton.children().removeClass().addClass("btn").appendTo("#cols");	
		    
		});	

			</script>

	</head>
	<body>
		<!-- 头部导航条 -->
		<!-- 数据表格展示模块 开始 -->
		<div class="row-fluid" style="margin-top: -18px;">
			<div class="widget-box">
				<div class="widget-box">
					<div class="widget-title"
						style="height: 40px; line-height: 40px; overflow: hidden;">
						<span class="icon" style="float: left; padding: 0px 10px;">
							<i class="icon-search"></i> </span>
						&nbsp;&nbsp;&nbsp;每页显示条数：
						<select name="pageSize" id="pageSize"
							style="width: 80px; margin-bottom: 0px;"
							onchange="setPageNum('tableForData','pageSize')">
							<option selected="selected" value="10">
								10
							</option>
							<option value="30">
								30
							</option>
							<option value="50">
								50
							</option>
							<option value="100">
								100
							</option>
						</select>
						<div class="buttons" style="margin-top: 0px;" id="cols">
							<button type="button" class="btn"
								onclick="showSearchItems('searchItems');">
								展开/关闭筛选项
							</button>
						</div>
					</div>
				</div>
				<!-- 搜索项模块 开始 -->
				<div id="searchItems" class="widget-content row"
					style="margin: 0 auto; text-align: center; width: 99%; border-left: 1px solid #ccc; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; margin-top: -18px; margin-bottom: 18px; display: none;">
					<form action="" id="searchDataForm">
						<table id="wenbenData" style="margin: auto; width: 100%;">
							<tr>
								<td style="text-align: right;">
									座席上诉时间:
								<td>
								<td style="text-align: left;">
									<div class="input-append date" style="margin-bottom: 0px;"
										data-picker-position="bottom-left"
										format-type="yyyy-MM-dd hh:mm:ss"
										data-link-field="agent_user_dt_DFTB"
										data-provide="datetimepicker-inline">
										<input type="text" style="width: 178px" id="agent_user_dt_DFTB"
											name="agent_user_dt_DFTB" data-Column="agent_user_dt" isrequired="true">
										<span class="add-on"><i class="icon-th"></i> </span>
									</div>
									<i style="color:#FF0033;">*</i>
								</td>
								<td style="text-align: right;">
									至:
								<td>
								<td style="text-align: left;">
									<div class="input-append date" style="margin-bottom: 0px;"
										data-picker-position="bottom-left"
										format-type="yyyy-MM-dd hh:mm:ss"
										data-link-field="agent_user_dt_DFTE"
										data-provide="datetimepicker-inline">
										<input type="text" style="width: 178px" id="agent_user_dt_DFTE"
											name="agent_user_dt_DFTE" data-Column="agent_user_dt" isrequired="true">
										<span class="add-on"><i class="icon-th"></i> </span>
									</div>
									<i style="color:#FF0033;">*</i>
								</td>
								<td style="text-align: right;">
									评分状态:
								<td>
								<td style="text-align: left;">
									<select type="text" id="score_state" name="score_state"
										style="margin-bottom: 0px;"></select>
								</td>
							</tr>
							<tr>
								
								
								<td style="text-align: right;">
									分机号码:
								<td>
								<td style="text-align: left;">
										<input type="text" name="agent_user" id="agent_user" />
								</td>
								<td style="text-align: right;">
									质检员:
								<td>
								<td style="text-align: left;">
										<input type="text" name="owner" id="owner" />
								</td>
							</tr>
						</table>
					</form>
					<button type="button" id="btn_search" class="btn"
						onclick="searchData();">
						<i class="icon-tag"></i> 搜索
					</button>
					<button type="button" id="btn_search" class="btn"
						onclick="chongzhi('searchDataForm');">
						<i class="icon-repeat"></i> 重置
					</button>
				</div>
				<!-- 搜索项模块 结束 -->
				<!-- 数据表格展示模块 开始 -->
				<div class="widget-content nopadding"
					style="margin-top: -20px; position: relative;">
					<!-- class 或 = display -->
					<table style="width: 100% !important;"
						class="table table-striped table-bordered nowrap"
						id="tableForData" cellspacing="0"></table>
				</div>
			</div>
		</div>
		<!-- 数据表格展示模块 结束 -->


		<!-- 此地放可以放置table等 -->

		
		<!-- 功能按钮模块 开始 -->
		<div class="widget-box collapsible" style="margin-top: -15px;">
			<div class="widget-title"
				style="height: 40px; line-height: 40px; overflow: hidden;">
				<span class="icon" style="float: left; padding: 0px 10px;"><i
					class="icon-cog"></i> </span> &nbsp;
					<BUTTON onclick='protExecl()' id=btn_excel class=btn>
					EXCEL导出
					</BUTTON>				
				
			</div>
		</div>
		<!-- 功能按钮模块 结束 -->
		<!-- 此处可以放table -->
		<!-- 修改数据form 开始 -->
		<div id="updateFormDiv" class="widget-content row"
			style="display: none; margin: 0 auto; text-align: center; width: 99%; border-left: 1px solid #ccc; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; margin-top: -18px; margin-bottom: 18px;">
			<form class="form-horizontal" id="updateForm">
					<input type="hidden" id="id" name="id" placeholder="id">
				<table id="columns" style=" margin: auto; width: 100%;">
					<tr>
						<td style="width: 100px; text-align: right;">
							评分流水号:
						</td>
						<td style="text-align: left;">
							<input type="text" id="pingfenliushuihao" readonly="readonly" name="grade_id" class="grade_id"/>
						</td>

						<td style="width: 100px; text-align: right;">
							工号:
						</td>
						<td style="text-align: left;">
							<input type="text" name="owner" readonly="readonly" />
						</td>
						<td style="width: 100px; text-align: right;">
							分机号码：
						</td>
						<td style="text-align: left;">
							<input type="text" name="agent_user" readonly="readonly" />
						</td>
						
					</tr>
					<tr>
						
						<td style="width: 100px; text-align: right;">
							评分状态:
						</td>
						<td style="text-align: left;">
							<input type="text" readonly="readonly" id="score_state"  name="score_state"  />
						</td>
						<td style="width: 100px; text-align: right;">
							座席上诉时间:
						</td>
						<td style="text-align: left;">
							<input type="text"  readonly="readonly" name="agent_user_dt" />
						</td>
						<td style="width: 100px; text-align: right;">
							文件名:
						</td>
						<td style="text-align: left;">
							<input type="text" id="file_name" readonly="readonly"  name="file_name" class="file_name"/>
						</td>
					</tr>
					<tr>
						<td style="width: 100px; text-align: right;">
							座席复审说明：
						</td>
						<td colspan="5" style="text-align: left;">
							<textarea id="fushen_remark"  name="agent_user_remark" class="agent_user_remark"
								readonly="readonly"
								style="padding: 0; margin: 0;  width: 92%; height: 50px">
							</textarea>
						</td>
					</tr>
					<tr>
						<td style="width: 100px; text-align: right;">
							录音内容/评分评语：
						</td>
						<td colspan="5" style="text-align: left;">
							<textarea   name="grade_remark" class="grade_remark"
								readonly="readonly"
								style="padding: 0; margin: 0;  width: 92%; height: 50px">
							</textarea>
						</td>
					</tr>
					<tr>
						<td style="width: 100px; text-align: right;">
							质检复审说明：
						</td>
						<td colspan="5" style="text-align: left;">
							<textarea   name="admin_remark" class="admin_remark"
								readonly="readonly"
								style="padding: 0; margin: 0;  width: 92%; height: 50px">
							</textarea>
						</td>	
					</tr>
					
				</table>
			</form>
		</div>
		<!-- 修改数据form 结束 -->
		<!-- 添加数据form 开始 -->

		<!-- 添加数据form 结束 -->
	</body>
</html>